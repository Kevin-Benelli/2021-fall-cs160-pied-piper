(this["webpackJsonpstocked-client"]=this["webpackJsonpstocked-client"]||[]).push([[0],{187:function(e,t,n){},195:function(e,t,n){},215:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(16),r=n.n(s),o=(n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(13)),i=(n(195),n(38)),l=n.n(i),u=n(68),h=n(12),j=n(286),d=n(48),b=n.p+"static/media/logo.7f424a7c.png",f=n(40),m=n.n(f),g=n(54),O=n(31),p=n(125),x=n(72),v=n(82);n(215);var w=n(1),S=function(e){var t=e.setLoggedInUsername,n=Object(a.useState)(""),c=Object(o.a)(n,2),s=c[0],r=c[1],i=Object(a.useState)(!1),u=Object(o.a)(i,2),h=u[0],d=u[1],b=Object(a.useState)(""),f=Object(o.a)(b,2),S=f[0],N=f[1],k=Object(a.useState)(null),y=Object(o.a)(k,2),D=y[0],T=y[1];function C(e,t){return M.apply(this,arguments)}function M(){return(M=Object(g.a)(m.a.mark((function e(n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{l.a.post("http://localhost:5000/post_".concat(a),{username:s,password:S}).then((function(e){e.data.error?T(e.data.message):(T(null),t(s))}))}catch(c){console.log("Yo something went wrong: %s",c)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=Object(w.jsx)(p.a,{content:"".concat(h?"Hide":"Show"," Password"),placement:"right",children:Object(w.jsx)(j.a,{icon:h?"unlock":"lock",intent:O.a.WARNING,minimal:!0,onClick:function(){d(!h)}})}),P=Object(w.jsx)("div",{className:"login center",children:Object(w.jsxs)("form",{children:[Object(w.jsx)(j.b,{className:"username",placeholder:"Username",onChange:function(e){return r(e.target.value)},value:s}),Object(w.jsx)(j.b,{className:"password",placeholder:"Password",onChange:function(e){return N(e.target.value)},value:S,rightElement:L,type:h?"text":"password"}),Object(w.jsx)(j.a,{className:"login-submit",onClick:function(e){C(e,"login")},children:" Login "}),Object(w.jsx)(j.a,{className:"create-account-submit",onClick:function(e){C(e,"create_account")},children:" Create Account "}),Object(w.jsx)("div",{style:{color:v.Colors.RED1,marginTop:"5px"},children:D})]})});return Object(w.jsx)(x.a,{placement:"bottom",content:P,children:Object(w.jsx)(j.a,{intent:O.a.PRIMARY,icon:"log-in",text:"Login",tabIndex:0})})},N=(n(242),n(243),function(e){var t=e.loggedInUsername,n=e.setLoggedInUsername;var a=Object(w.jsxs)("div",{className:"userdropdown center",children:[Object(w.jsx)(j.a,{className:"logout",onClick:function(e){n(null)},children:" Logout "}),Object(w.jsx)("br",{}),"To be continued"]});return Object(w.jsx)(x.a,{placement:"bottom",content:a,children:Object(w.jsx)(j.a,{intent:O.a.PRIMARY,icon:"user",text:t,tabIndex:0})})}),k=function(e){var t=e.loggedInUsername,n=e.setLoggedInUsername;return Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{className:"header",children:Object(w.jsxs)(j.c,{className:"header-navbar",children:[Object(w.jsx)(j.d,{align:d.a.LEFT,children:Object(w.jsx)("img",{src:b,className:"header-logo",alt:"logo"})}),Object(w.jsxs)(j.d,{align:d.a.RIGHT,children:[t&&Object(w.jsx)(N,{loggedInUsername:t,setLoggedInUsername:n}),!t&&Object(w.jsx)(S,{setLoggedInUsername:n})]})]})})})},y=(n(244),n(122)),D=n(123),T=n(116),C=n(117),M=n(124),L=n(121),P=(n(245),n.p+"static/media/loading.60616635.gif"),I=["updateMousePos","draw"];var R=function(e){var t,n,c,s,r=Object(a.useState)(null),i=Object(o.a)(r,2),u=i[0],h=i[1],j=Object(a.useState)(null),d=Object(o.a)(j,2),b=d[0],f=d[1],m=Object(a.useState)(!1),g=Object(o.a)(m,2),O=g[0],p=g[1],x=e.ticker.toUpperCase(),v=new Date,S=(t=v,n=-1,c=0,s=0,new Date(t.getFullYear()+s,t.getMonth()+c,Math.min(t.getDate()+n,new Date(t.getFullYear()+s,t.getMonth()+c+1,0).getDate()))),N=Math.floor(S.getTime()/1e3),k=Math.floor(v.getTime()/1e3);return Object(a.useEffect)((function(){l.a.get("http://localhost:5000/chart_data",{params:{resolution:"30",symbol:x,from:N,to:k}}).then((function(e){h(e.data.chartData),f(e.data.error),p(!0)}))}),[]),Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{className:"chart",children:Object(w.jsx)(E,{chartData:u,error:b,loaded:O,width:"800px",height:"500px",symbol:x,resolution:"30",from:N,to:k})})})},E=function(e){Object(M.a)(n,e);var t=Object(L.a)(n);function n(e){var a;return Object(T.a)(this,n),(a=t.call(this,e)).draw=function(e,t){var n=e.canvas.width,c=e.canvas.height,s=n-60,r=c-40;e.clearRect(0,0,n,c),e.fillStyle="#222222",e.fillRect(0,0,n,c);var o=n-60;e.fillStyle="#2b2b43",e.fillRect(o,0,2,c),e.fillStyle="#ffffff";e.font="15px Georgia";var i,l,u=a.getDisplayedPrices(),h=0;e.textAlign="center";for(var j=0;j<u.length;j++){var d=u[j],b=o+30,f=r/u.length*j+15+5;0===j?i=f:j===u.length-1&&(l=f),Math.abs(f-h)>=25&&(e.fillText(d.toFixed(2),b,f),h=f)}for(var m=a.props.chartData.candles,g=m.c.length,O=(s-40)/g,p=Math.max(O/20,1),x=0,v=[],w=0;w<g;w++){var S=m.o[w],N=m.c[w],k=m.h[w],y=m.l[w],D=m.t[w],T=(m.v[w],a.getHeightOfPrice(S,i,l)),C=a.getHeightOfPrice(N,i,l),M=a.getHeightOfPrice(k,i,l),L=a.getHeightOfPrice(y,i,l),P=void 0;P=S<N?"#26a69a":S>N?"#ee5350":"#808080",e.fillStyle=P;var I=w*O+5,R=O-5,E=I+R/2-p/2;e.fillRect(I,Math.min(T,C),R,Math.abs(T-C)),e.fillRect(E,M,p,L-M),v.push({timestamp:D,close:N,closeHeight:C,open:S,openHeight:T,high:k,highHeight:M,low:y,lowHeight:L,xRange:[I,I+R]});var F=new Date(1e3*D);if(F.getMinutes()%5===0&&Math.abs(E-x)>=50){e.fillStyle="#ffffff";var U=void 0;U=0===F.getDate()?F.toLocaleDateString(void 0,{month:"short"}):F.toTimeString().slice(0,5),e.fillText(U,E,c-20),x=E}}var H=new Intl.DateTimeFormat("en",{timeStyle:"short",hour12:!1,dateStyle:"short"}),A=a.state,Y=A.mouseX,_=A.mouseY;if(Y&&_){e.setLineDash([8,6]),e.strokeStyle="#758696",e.beginPath(),e.moveTo(Y,_),e.lineTo(0,_),e.stroke(),e.beginPath(),e.moveTo(Y,_),e.lineTo(s,_),e.stroke(),e.beginPath(),e.moveTo(Y,_),e.lineTo(Y,0),e.stroke(),e.beginPath(),e.moveTo(Y,_),e.lineTo(Y,c),e.stroke(),e.setLineDash([]);var J=v.find((function(e){var t=e.xRange;return function(e,t){return e>=t[0]&&e<=t[1]}(Y,t)}));if(J){var B=J.timestamp,G=J.open,X=J.close,z=J.low,W=J.high,q=new Date(1e3*B);e.fillStyle="green",e.textAlign="left",e.fillText("Time: "+H.format(q)+", Open: "+G.toFixed(2)+", Close: "+X.toFixed(2)+", Low: "+z.toFixed(2)+", High: "+W.toFixed(2),5,40)}}e.fillStyle="#ffffff",e.textAlign="left";var K=new Date(1e3*a.props.from),Q=new Date(1e3*a.props.to),V=a.props.symbol+" from "+H.format(K)+" to "+H.format(Q)+", Resolution: "+a.props.resolution;e.fillText(V,5,20)},a.getHeightOfPrice=function(e,t,n){var c,s,r=a.props.chartData.computed,o=r.max,i=r.min;return(s=[n,t])[0]+(e-(c=[i,o])[0])*(s[1]-s[0])/(c[1]-c[0])},a.getDisplayedPrices=function(){for(var e=a.props.chartData.computed,t=e.max,n=e.min,c=a.state.zoomLevel,s=[],r=Math.ceil(t);r>n;r-=1*c)s.push(r);return s.push(Math.floor(n)),s},a.updateMousePos=function(e,t){a.setState({mouseX:e,mouseY:t})},a.state={zoomLevel:1,mouseX:null,mouseY:null},a}return Object(C.a)(n,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.loaded,c=e.error;return Object(w.jsx)("div",{className:"center",children:Object(w.jsxs)("div",{className:"chart",style:{width:t,height:n},children:[a&&null===c&&Object(w.jsx)(F,{draw:this.draw,width:t,height:n,style:{width:t,height:n},updateMousePos:this.updateMousePos}),a&&null!==c&&Object(w.jsx)("div",{children:"Error 404: ticker not found"}),!a&&Object(w.jsx)("img",{src:P,alt:"Loading..."})]})})}}]),n}(c.a.Component),F=function(e){var t=e.updateMousePos,n=e.draw,c=Object(D.a)(e,I),s=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=s.current;e.addEventListener("mousemove",(function(n){var a=e.getBoundingClientRect(),c=Math.round(n.clientX-a.left),s=Math.round(n.clientY-a.top);t(c,s)})),e.addEventListener("mouseleave",(function(e){t(null,null)}));var a,c=e.getContext("2d"),r=0;return function e(){r++,n(c,r),a=window.requestAnimationFrame(e)}(),function(){window.cancelAnimationFrame(a)}}),[n]),Object(w.jsx)("canvas",Object(y.a)({ref:s},c))},U=function(){var e=Object(h.e)().ticker;return Object(w.jsx)(R,{ticker:e})},H=(n(248),function(){return Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{children:Object(w.jsx)("h1",{className:"settings-body",children:"Welcome to the settings page."})})})}),A=(n(249),function(){return Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{className:"search",children:Object(w.jsx)(j.c,{className:"search-navbar",children:Object(w.jsx)(j.d,{align:d.a.RIGHT,children:Object(w.jsx)(j.b,{className:"search-bar",placeholder:"Search Bar"})})})})})}),Y=n(120),_=n(73),J=function(e){var t=e.socket,n=e.username,c=e.chatroom,s=Object(a.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],u=Object(a.useState)([]),h=Object(o.a)(u,2),j=h[0],d=h[1],b=function(){var e=Object(g.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===i){e.next=5;break}return a={chatroom:c,author:n,message:i,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()+":"+new Date(Date.now()).getSeconds()},e.next=4,t.emit("send_message",a);case 4:d((function(e){return[].concat(Object(_.a)(e),[a])}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t.on("receive_message",(function(e){console.log(e),d((function(t){return[].concat(Object(_.a)(t),[e])}))}))}),[t]),Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"chat-room-header",children:Object(w.jsxs)("p",{children:[" Live Chat Room for ",c.toUpperCase()," "]})}),Object(w.jsx)("div",{className:"chat-room-body",children:j.map((function(e){return Object(w.jsx)("div",{className:"message",id:n===e.author?"user-self":"user-other",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"message-content",children:Object(w.jsx)("p",{children:e.message})}),Object(w.jsx)("div",{className:"message-meta",children:Object(w.jsxs)("p",{id:"sender_time",children:[e.author," Sent: ",e.time]})})]})})}))}),Object(w.jsxs)("div",{className:"chat-room-footer",children:[Object(w.jsx)("input",{type:"text",placeholder:"Lets Talk Stocks...",onChange:function(e){l(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&b()}}),Object(w.jsx)("button",{onClick:b,children:"\u25ba"})]})]})},B=Object(Y.io)("http://localhost:5001"),G=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],u=Object(a.useState)(!1),h=Object(o.a)(u,2),j=h[0],d=h[1];return Object(w.jsx)("div",{className:"center",children:j?Object(w.jsx)(J,{socket:B,username:n,chatroom:i}):Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:" Join Stocked Chat Room Now! "}),Object(w.jsx)("input",{type:"text",placeholder:"Enter Name",onChange:function(e){c(e.target.value.toUpperCase())}}),Object(w.jsx)("input",{type:"text",placeholder:"Enter Ticker",onChange:function(e){l(e.target.value.toUpperCase())}}),Object(w.jsx)("button",{onClick:function(){""!==n&&""!==i&&(B.emit("join_chat_room",i),d(!0))},children:" Join Chat Room "})]})})};var X=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1];Object(a.useEffect)((function(){l.a.get("http://localhost:5000/home").then((function(e){s(e.data)}))}),[]);var r=function(e,t){var n=c.a.useState((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),a=Object(o.a)(n,2),s=a[0],r=a[1];return c.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(s))}),[t,s]),[s,r]}(null,"username"),i=Object(o.a)(r,2),j=i[0],d=i[1];return Object(w.jsx)("div",{className:"center",children:Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(k,{loggedInUsername:j,setLoggedInUsername:d}),n,j&&Object(w.jsx)("div",{children:"This div shows when a user is logged in."}),!j&&Object(w.jsx)("div",{children:"This div shows when there's no logged in user."}),Object(w.jsxs)(u.a,{basename:"/2021-fall-cs160-pied-piper",children:[Object(w.jsx)(h.a,{path:"/ticker/:ticker",children:Object(w.jsx)(U,{})}),Object(w.jsx)(h.a,{path:"/settings",children:Object(w.jsx)(H,{})}),Object(w.jsx)(h.a,{path:"/search",children:Object(w.jsx)(A,{})}),Object(w.jsx)(h.a,{path:"/chat",children:Object(w.jsx)(G,{})})]})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,287)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(X,{})}),document.getElementById("root")),z()}},[[279,1,2]]]);
//# sourceMappingURL=main.780e11b9.chunk.js.map