(this["webpackJsonpstocked-client"]=this["webpackJsonpstocked-client"]||[]).push([[0],{155:function(e,t,n){},163:function(e,t,n){},183:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),o=n.n(r),s=(n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(17)),i=(n(163),n(31)),l=n.n(i),u=n(48),h=n(12),d=n(225),j=n(35),f=n.p+"static/media/logo.7f424a7c.png",g=n(49),b=n.n(g),m=n(81),O=n(26),p=n(93),v=n(53),x=n(63);n(183);var w=n(3),S=function(e){var t=e.setLoggedInUsername,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1],i=Object(a.useState)(!1),u=Object(s.a)(i,2),h=u[0],j=u[1],f=Object(a.useState)(""),g=Object(s.a)(f,2),S=g[0],N=g[1],y=Object(a.useState)(null),T=Object(s.a)(y,2),D=T[0],k=T[1];function M(e,t){return I.apply(this,arguments)}function I(){return(I=Object(m.a)(b.a.mark((function e(n,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{l.a.post("http://localhost:5000/post_".concat(a),{username:r,password:S}).then((function(e){e.data.error?k(e.data.message):(k(null),t(r))}))}catch(c){console.log("Yo something went wrong: %s",c)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=Object(w.jsx)(p.a,{content:"".concat(h?"Hide":"Show"," Password"),placement:"right",children:Object(w.jsx)(d.a,{icon:h?"unlock":"lock",intent:O.a.WARNING,minimal:!0,onClick:function(){j(!h)}})}),L=Object(w.jsx)("div",{className:"login center",children:Object(w.jsxs)("form",{children:[Object(w.jsx)(d.b,{className:"username",placeholder:"Username",onChange:function(e){return o(e.target.value)},value:r}),Object(w.jsx)(d.b,{className:"password",placeholder:"Password",onChange:function(e){return N(e.target.value)},value:S,rightElement:P,type:h?"text":"password"}),Object(w.jsx)(d.a,{className:"login-submit",onClick:function(e){M(e,"login")},children:" Login "}),Object(w.jsx)(d.a,{className:"create-account-submit",onClick:function(e){M(e,"create_account")},children:" Create Account "}),Object(w.jsx)("div",{style:{color:x.Colors.RED1,marginTop:"5px"},children:D})]})});return Object(w.jsx)(v.a,{placement:"bottom",content:L,children:Object(w.jsx)(d.a,{intent:O.a.PRIMARY,icon:"log-in",text:"Login",tabIndex:0})})},N=(n(210),n(211),function(e){var t=e.loggedInUsername,n=e.setLoggedInUsername;var a=Object(w.jsxs)("div",{className:"userdropdown center",children:[Object(w.jsx)(d.a,{className:"logout",onClick:function(e){n(null)},children:" Logout "}),Object(w.jsx)("br",{}),"To be continued"]});return Object(w.jsx)(v.a,{placement:"bottom",content:a,children:Object(w.jsx)(d.a,{intent:O.a.PRIMARY,icon:"user",text:t,tabIndex:0})})}),y=function(e){var t=e.loggedInUsername,n=e.setLoggedInUsername;return Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{className:"header",children:Object(w.jsxs)(d.c,{className:"header-navbar",children:[Object(w.jsx)(d.d,{align:j.a.LEFT,children:Object(w.jsx)("img",{src:f,className:"header-logo",alt:"logo"})}),Object(w.jsxs)(d.d,{align:j.a.RIGHT,children:[t&&Object(w.jsx)(N,{loggedInUsername:t,setLoggedInUsername:n}),!t&&Object(w.jsx)(S,{setLoggedInUsername:n})]})]})})})},T=(n(212),n(90)),D=n(91),k=n(85),M=n(86),I=n(92),P=n(89),L=(n(213),n.p+"static/media/loading.60616635.gif"),R=["updateMousePos","draw"];var C=function(e){var t,n,c,r,o=Object(a.useState)(null),i=Object(s.a)(o,2),u=i[0],h=i[1],d=Object(a.useState)(null),j=Object(s.a)(d,2),f=j[0],g=j[1],b=Object(a.useState)(!1),m=Object(s.a)(b,2),O=m[0],p=m[1],v=e.ticker.toUpperCase(),x=new Date,S=(t=x,n=-1,c=0,r=0,new Date(t.getFullYear()+r,t.getMonth()+c,Math.min(t.getDate()+n,new Date(t.getFullYear()+r,t.getMonth()+c+1,0).getDate()))),N=Math.floor(S.getTime()/1e3),y=Math.floor(x.getTime()/1e3);return Object(a.useEffect)((function(){l.a.get("http://localhost:5000/chart_data",{params:{resolution:"30",symbol:v,from:N,to:y}}).then((function(e){h(e.data.chartData),g(e.data.error),p(!0)}))}),[]),Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{className:"chart",children:Object(w.jsx)(F,{chartData:u,error:f,loaded:O,width:"800px",height:"500px",symbol:v,resolution:"30",from:N,to:y})})})},F=function(e){Object(I.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).draw=function(e,t){var n=e.canvas.width,c=e.canvas.height,r=n-60,o=c-40;e.clearRect(0,0,n,c),e.fillStyle="#222222",e.fillRect(0,0,n,c);var s=n-60;e.fillStyle="#2b2b43",e.fillRect(s,0,2,c),e.fillStyle="#ffffff";e.font="15px Georgia";var i,l,u=a.getDisplayedPrices(),h=0;e.textAlign="center";for(var d=0;d<u.length;d++){var j=u[d],f=s+30,g=o/u.length*d+15+5;0===d?i=g:d===u.length-1&&(l=g),Math.abs(g-h)>=25&&(e.fillText(j.toFixed(2),f,g),h=g)}for(var b=a.props.chartData.candles,m=b.c.length,O=(r-40)/m,p=Math.max(O/20,1),v=0,x=[],w=0;w<m;w++){var S=b.o[w],N=b.c[w],y=b.h[w],T=b.l[w],D=b.t[w],k=(b.v[w],a.getHeightOfPrice(S,i,l)),M=a.getHeightOfPrice(N,i,l),I=a.getHeightOfPrice(y,i,l),P=a.getHeightOfPrice(T,i,l),L=void 0;L=S<N?"#26a69a":S>N?"#ee5350":"#808080",e.fillStyle=L;var R=w*O+5,C=O-5,F=R+C/2-p/2;e.fillRect(R,Math.min(k,M),C,Math.abs(k-M)),e.fillRect(F,I,p,P-I),x.push({timestamp:D,close:N,closeHeight:M,open:S,openHeight:k,high:y,highHeight:I,low:T,lowHeight:P,xRange:[R,R+C]});var H=new Date(1e3*D);if(H.getMinutes()%5===0&&Math.abs(F-v)>=50){e.fillStyle="#ffffff";var U=void 0;U=0===H.getDate()?H.toLocaleDateString(void 0,{month:"short"}):H.toTimeString().slice(0,5),e.fillText(U,F,c-20),v=F}}var E=new Intl.DateTimeFormat("en",{timeStyle:"short",hour12:!1,dateStyle:"short"}),A=a.state,Y=A.mouseX,B=A.mouseY;if(Y&&B){e.setLineDash([8,6]),e.strokeStyle="#758696",e.beginPath(),e.moveTo(Y,B),e.lineTo(0,B),e.stroke(),e.beginPath(),e.moveTo(Y,B),e.lineTo(r,B),e.stroke(),e.beginPath(),e.moveTo(Y,B),e.lineTo(Y,0),e.stroke(),e.beginPath(),e.moveTo(Y,B),e.lineTo(Y,c),e.stroke(),e.setLineDash([]);var G=x.find((function(e){var t=e.xRange;return function(e,t){return e>=t[0]&&e<=t[1]}(Y,t)}));if(G){var J=G.timestamp,X=G.open,_=G.close,z=G.low,W=G.high,q=new Date(1e3*J);e.fillStyle="green",e.textAlign="left",e.fillText("Time: "+E.format(q)+", Open: "+X.toFixed(2)+", Close: "+_.toFixed(2)+", Low: "+z.toFixed(2)+", High: "+W.toFixed(2),5,40)}}e.fillStyle="#ffffff",e.textAlign="left";var K=new Date(1e3*a.props.from),Q=new Date(1e3*a.props.to),V=a.props.symbol+" from "+E.format(K)+" to "+E.format(Q)+", Resolution: "+a.props.resolution;e.fillText(V,5,20)},a.getHeightOfPrice=function(e,t,n){var c,r,o=a.props.chartData.computed,s=o.max,i=o.min;return(r=[n,t])[0]+(e-(c=[i,s])[0])*(r[1]-r[0])/(c[1]-c[0])},a.getDisplayedPrices=function(){for(var e=a.props.chartData.computed,t=e.max,n=e.min,c=a.state.zoomLevel,r=[],o=Math.ceil(t);o>n;o-=1*c)r.push(o);return r.push(Math.floor(n)),r},a.updateMousePos=function(e,t){a.setState({mouseX:e,mouseY:t})},a.state={zoomLevel:1,mouseX:null,mouseY:null},a}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.loaded,c=e.error;return Object(w.jsx)("div",{className:"center",children:Object(w.jsxs)("div",{className:"chart",style:{width:t,height:n},children:[a&&null===c&&Object(w.jsx)(H,{draw:this.draw,width:t,height:n,style:{width:t,height:n},updateMousePos:this.updateMousePos}),a&&null!==c&&Object(w.jsx)("div",{children:"Error 404: ticker not found"}),!a&&Object(w.jsx)("img",{src:L,alt:"Loading..."})]})})}}]),n}(c.a.Component),H=function(e){var t=e.updateMousePos,n=e.draw,c=Object(D.a)(e,R),r=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=r.current;e.addEventListener("mousemove",(function(n){var a=e.getBoundingClientRect(),c=Math.round(n.clientX-a.left),r=Math.round(n.clientY-a.top);t(c,r)})),e.addEventListener("mouseleave",(function(e){t(null,null)}));var a,c=e.getContext("2d"),o=0;return function e(){o++,n(c,o),a=window.requestAnimationFrame(e)}(),function(){window.cancelAnimationFrame(a)}}),[n]),Object(w.jsx)("canvas",Object(T.a)({ref:r},c))},U=function(){var e=Object(h.e)().ticker;return Object(w.jsx)(C,{ticker:e})},E=(n(216),function(){return Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{children:Object(w.jsx)("h1",{className:"settings-body",children:"Welcome to the settings page."})})})}),A=(n(217),function(){return Object(w.jsx)("div",{className:"center",children:Object(w.jsx)("div",{className:"search",children:Object(w.jsx)(d.c,{className:"search-navbar",children:Object(w.jsx)(d.d,{align:j.a.RIGHT,children:Object(w.jsx)(d.b,{className:"search-bar",placeholder:"Search Bar"})})})})})});var Y=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){l.a.get("http://localhost:5000/home").then((function(e){r(e.data)}))}),[]);var o=function(e,t){var n=c.a.useState((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),a=Object(s.a)(n,2),r=a[0],o=a[1];return c.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(r))}),[t,r]),[r,o]}(null,"username"),i=Object(s.a)(o,2),d=i[0],j=i[1];return Object(w.jsx)("div",{className:"center",children:Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(y,{loggedInUsername:d,setLoggedInUsername:j}),n,d&&Object(w.jsx)("div",{children:"This div shows when a user is logged in."}),!d&&Object(w.jsx)("div",{children:"This div shows when there's no logged in user."}),Object(w.jsxs)(u.a,{basename:"/2021-fall-cs160-pied-piper",children:[Object(w.jsx)(h.a,{path:"/ticker/:ticker",children:Object(w.jsx)(U,{})}),Object(w.jsx)(h.a,{path:"/settings",children:Object(w.jsx)(E,{})}),Object(w.jsx)(h.a,{path:"/search",children:Object(w.jsx)(A,{})})]})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,226)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(Y,{})}),document.getElementById("root")),B()}},[[218,1,2]]]);
//# sourceMappingURL=main.5d9d3963.chunk.js.map