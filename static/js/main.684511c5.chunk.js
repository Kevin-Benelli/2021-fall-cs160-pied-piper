(this["webpackJsonpstocked-client"]=this["webpackJsonpstocked-client"]||[]).push([[0],{154:function(e,t,n){},162:function(e,t,n){},182:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(15),i=n.n(o),r=(n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(23)),s=(n(162),n(31)),l=n.n(s),u=n(48),h=n(12),f=n(222),d=n(35),j=n.p+"static/media/logo.7f424a7c.png",g=n(49),m=n.n(g),b=n(81),p=n(25),v=n(93),O=n(53),x=(n(182),n(3)),w=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(r.a)(o,2),s=i[0],u=i[1],h=Object(a.useState)(""),d=Object(r.a)(h,2),j=d[0],g=d[1];function w(e,t){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t),console.log(a),e.prev=3,e.next=6,l.a.post("http://localhost:5000/post_".concat(a),{username:n,password:j});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Yo something went wrong: %s",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}var D=Object(x.jsx)(v.a,{content:"".concat(s?"Hide":"Show"," Password"),placement:"right",children:Object(x.jsx)(f.a,{icon:s?"unlock":"lock",intent:p.a.WARNING,minimal:!0,onClick:function(){u(!s)}})}),S=Object(x.jsx)("div",{className:"login center",children:Object(x.jsxs)("form",{children:[Object(x.jsx)(f.b,{className:"username",placeholder:"Username",onChange:function(e){return c(e.target.value)},value:n}),Object(x.jsx)(f.b,{className:"password",placeholder:"Password",onChange:function(e){return g(e.target.value)},value:j,rightElement:D,type:s?"text":"password"}),Object(x.jsx)(f.a,{className:"login-submit",onClick:function(e){w(e,"login")},children:" Login "}),Object(x.jsx)(f.a,{className:"create-account-submit",onClick:function(e){w(e,"create_account")},children:" Create Account "})]})});return Object(x.jsx)(O.a,{placement:"bottom",content:S,children:Object(x.jsx)(f.a,{intent:p.a.PRIMARY,icon:"log-in",text:"Login",tabIndex:0})})},k=(n(209),function(){return Object(x.jsx)("div",{className:"center",children:Object(x.jsx)("div",{className:"header",children:Object(x.jsxs)(f.c,{className:"header-navbar",children:[Object(x.jsx)(f.d,{align:d.a.LEFT,children:Object(x.jsx)("img",{src:j,className:"header-logo",alt:"logo"})}),Object(x.jsx)(f.d,{align:d.a.RIGHT,children:Object(x.jsx)(w,{})})]})})})}),D=(n(210),n(90)),S=n(91),y=n(85),M=n(86),P=n(92),T=n(89),N=(n(211),n.p+"static/media/loading.60616635.gif"),F=["updateMousePos","draw"];var C=function(e){var t,n,c,o,i=Object(a.useState)(null),s=Object(r.a)(i,2),u=s[0],h=s[1],f=Object(a.useState)(null),d=Object(r.a)(f,2),j=d[0],g=d[1],m=Object(a.useState)(!1),b=Object(r.a)(m,2),p=b[0],v=b[1],O=e.ticker.toUpperCase(),w=new Date,k=(t=w,n=-1,c=0,o=0,new Date(t.getFullYear()+o,t.getMonth()+c,Math.min(t.getDate()+n,new Date(t.getFullYear()+o,t.getMonth()+c+1,0).getDate()))),D=Math.floor(k.getTime()/1e3),S=Math.floor(w.getTime()/1e3);return Object(a.useEffect)((function(){l.a.get("http://localhost:5000/chart_data",{params:{resolution:"30",symbol:O,from:D,to:S}}).then((function(e){h(e.data.chartData),g(e.data.error),v(!0)}))}),[]),Object(x.jsx)("div",{className:"center",children:Object(x.jsx)("div",{className:"chart",children:Object(x.jsx)(L,{chartData:u,error:j,loaded:p,width:"800px",height:"500px",symbol:O,resolution:"30",from:D,to:S})})})},L=function(e){Object(P.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).draw=function(e,t){var n=e.canvas.width,c=e.canvas.height,o=n-60,i=c-40;e.clearRect(0,0,n,c),e.fillStyle="#222222",e.fillRect(0,0,n,c);var r=n-60;e.fillStyle="#2b2b43",e.fillRect(r,0,2,c),e.fillStyle="#ffffff";e.font="15px Georgia";var s,l,u=a.getDisplayedPrices(),h=0;e.textAlign="center";for(var f=0;f<u.length;f++){var d=u[f],j=r+30,g=i/u.length*f+15+5;0===f?s=g:f===u.length-1&&(l=g),Math.abs(g-h)>=25&&(e.fillText(d.toFixed(2),j,g),h=g)}for(var m=a.props.chartData.candles,b=m.c.length,p=(o-40)/b,v=Math.max(p/20,1),O=0,x=[],w=0;w<b;w++){var k=m.o[w],D=m.c[w],S=m.h[w],y=m.l[w],M=m.t[w],P=(m.v[w],a.getHeightOfPrice(k,s,l)),T=a.getHeightOfPrice(D,s,l),N=a.getHeightOfPrice(S,s,l),F=a.getHeightOfPrice(y,s,l),C=void 0;C=k<D?"#26a69a":k>D?"#ee5350":"#808080",e.fillStyle=C;var L=w*p+5,R=p-5,H=L+R/2-v/2;e.fillRect(L,Math.min(P,T),R,Math.abs(P-T)),e.fillRect(H,N,v,F-N),x.push({timestamp:M,close:D,closeHeight:T,open:k,openHeight:P,high:S,highHeight:N,low:y,lowHeight:F,xRange:[L,L+R]});var A=new Date(1e3*M);if(A.getMinutes()%5===0&&Math.abs(H-O)>=50){e.fillStyle="#ffffff";var E=void 0;E=0===A.getDate()?A.toLocaleDateString(void 0,{month:"short"}):A.toTimeString().slice(0,5),e.fillText(E,H,c-20),O=H}}var Y=new Intl.DateTimeFormat("en",{timeStyle:"short",hour12:!1,dateStyle:"short"}),I=a.state,X=I.mouseX,B=I.mouseY;if(X&&B){e.setLineDash([8,6]),e.strokeStyle="#758696",e.beginPath(),e.moveTo(X,B),e.lineTo(0,B),e.stroke(),e.beginPath(),e.moveTo(X,B),e.lineTo(o,B),e.stroke(),e.beginPath(),e.moveTo(X,B),e.lineTo(X,0),e.stroke(),e.beginPath(),e.moveTo(X,B),e.lineTo(X,c),e.stroke(),e.setLineDash([]);var G=x.find((function(e){var t=e.xRange;return function(e,t){return e>=t[0]&&e<=t[1]}(X,t)}));if(G){var _=G.timestamp,z=G.open,J=G.close,U=G.low,q=G.high,W=new Date(1e3*_);e.fillStyle="green",e.textAlign="left",e.fillText("Time: "+Y.format(W)+", Open: "+z.toFixed(2)+", Close: "+J.toFixed(2)+", Low: "+U.toFixed(2)+", High: "+q.toFixed(2),5,40)}}e.fillStyle="#ffffff",e.textAlign="left";var K=new Date(1e3*a.props.from),Q=new Date(1e3*a.props.to),V=a.props.symbol+" from "+Y.format(K)+" to "+Y.format(Q)+", Resolution: "+a.props.resolution;e.fillText(V,5,20)},a.getHeightOfPrice=function(e,t,n){var c,o,i=a.props.chartData.computed,r=i.max,s=i.min;return(o=[n,t])[0]+(e-(c=[s,r])[0])*(o[1]-o[0])/(c[1]-c[0])},a.getDisplayedPrices=function(){for(var e=a.props.chartData.computed,t=e.max,n=e.min,c=a.state.zoomLevel,o=[],i=Math.ceil(t);i>n;i-=1*c)o.push(i);return o.push(Math.floor(n)),o},a.updateMousePos=function(e,t){a.setState({mouseX:e,mouseY:t})},a.state={zoomLevel:1,mouseX:null,mouseY:null},a}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.loaded,c=e.error;return Object(x.jsx)("div",{className:"center",children:Object(x.jsxs)("div",{className:"chart",style:{width:t,height:n},children:[a&&null===c&&Object(x.jsx)(R,{draw:this.draw,width:t,height:n,style:{width:t,height:n},updateMousePos:this.updateMousePos}),a&&null!==c&&Object(x.jsx)("div",{children:"Error 404: ticker not found"}),!a&&Object(x.jsx)("img",{src:N,alt:"Loading..."})]})})}}]),n}(c.a.Component),R=function(e){var t=e.updateMousePos,n=e.draw,c=Object(S.a)(e,F),o=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=o.current;e.addEventListener("mousemove",(function(n){var a=e.getBoundingClientRect(),c=Math.round(n.clientX-a.left),o=Math.round(n.clientY-a.top);t(c,o)})),e.addEventListener("mouseleave",(function(e){t(null,null)}));var a,c=e.getContext("2d"),i=0;return function e(){i++,n(c,i),a=window.requestAnimationFrame(e)}(),function(){window.cancelAnimationFrame(a)}}),[n]),Object(x.jsx)("canvas",Object(D.a)({ref:o},c))},H=function(){var e=Object(h.e)().ticker;return Object(x.jsx)(C,{ticker:e})};var A=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){l.a.get("http://localhost:5000/home").then((function(e){c(e.data)}))}),[]),Object(x.jsx)("div",{className:"center",children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(k,{}),n,Object(x.jsx)(u.a,{basename:"/2021-fall-cs160-pied-piper",children:Object(x.jsx)(h.a,{path:"/ticker/:ticker",children:Object(x.jsx)(H,{})})})]})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,223)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root")),E()}},[[214,1,2]]]);
//# sourceMappingURL=main.684511c5.chunk.js.map